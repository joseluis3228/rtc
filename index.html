<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>WebRTC example</title>
	<link href="CSS/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
	<link href="CSS/Main.css" rel="stylesheet" />
	<script src="Scripts/xRtc/Class.js"></script>
	<script src="Scripts/xRtc/CommonError.js"></script>
	<script src="Scripts/xRtc/Logger.js"></script>
	<script src="Scripts/xRtc/EventDispatcher.js"></script>
	<script src="Scripts/xRtc/Ajax.js"></script>
	<script src="Scripts/xRtc/ServerConnector.js"></script>
	<script src="Scripts/xRtc/AuthManager.js"></script>
	<script src="Scripts/xRtc/DataChannel.js"></script>
	<script src="Scripts/xRtc/HandshakeController.js"></script>
	<script src="Scripts/xRtc/Connection.js"></script>
	<script src="Scripts/xRtc/Stream.js"></script>
	<script src="Scripts/xRtc/Room.js"></script>

	<script src="Scripts/jquery-1.9.1.min.js"></script>
	<script src="Scripts/jquery.tmpl.min.js"></script>
	<script src="Scripts/Script.js"></script>
</head>
<body>
	<!--<div id="console"></div>-->
	<div id="step1">
		<form id="join-form">
			<table class="form">
				<tr>
					<th class="text-left">
						<label for="domain">Domain</label></th>
					<td>
						<input type="text" id="domain" name="domain" value="www.example.com" /></td>
				</tr>
				<tr>
					<th class="text-left">
						<label for="application">Application</label></th>
					<td>
						<input type="text" id="application" name="application" value="test_app" /></td>
				</tr>
				<tr>
					<th class="text-left">
						<label for="room">Room</label></th>
					<td>
						<input type="text" id="room" name="room" value="test_room" /></td>
				</tr>
				<tr>
					<th class="text-left">
						<label for="name">Name (identity)</label></th>
					<td>
						<input type="text" id="name" name="name" value="alex" /></td>
				</tr>
				<tr>
					<td colspan="2" class="button-block">
						<input type="submit" value="Join" class="btn btn-inverse" /></td>
				</tr>
			</table>
		</form>
	</div>

	<div id="step2">
		<div>
			<form id="connecton-form" class="input-block-level well">
				<h3>Connectyon type</h3>
				<label class="radio inline"><input type="radio" name="connectionType" value="" checked="checked" /> Default</label>
				<label class="radio inline"><input type="radio" name="connectionType" value="direct" /> Direct</label>
				<label class="radio inline"><input type="radio" name="connectionType" value="server" /> Server</label>
			</form>
		</div>
		<table id="chat-table">
			<tr>
				<td id="video-cell">
					<div id="video"></div>
					<div class="clear"></div>
				</td>
				<td rowspan="2" id="contacts-cell"></td>
			</tr>

			<tr>
				<td id="chat-cell">
					<div id="chat" class="input-block-level well"></div>

					<form id="chat-form">
						<div class="chat-input">
							<input type="text" name="message" value="" placeholder="Input message here" />
						</div>
						<div class="chat-button">
							<input type="submit" class="btn btn-info" value="Send" />
						</div>
						<div class="clear"></div>
					</form>

					<fieldset id="ws-test" class="hide">
						<legend>Websockets functionality (for test purpose)</legend>
						<div class="ws-targetUser">
							<input type="text" value="alex" placeholder="Input user name here" />
						</div>
						<div class="ws-message-type">
							<select>
								<option value="sendOffer">Offer</option>
								<option value="sendAnswer">Answer</option>
								<option value="sendIce">Ice</option>
							</select>
						</div>
						<form id="ws-form">
							<div class="ws-message">
								<textarea placeholder="Input message here"></textarea>
							</div>
							<div class="ws-button">
								<input type="submit" class="btn btn-info" value="Send via WebSokets" />
							</div>
							<div class="clear"></div>
						</form>
					</fieldset>
				</td>
			</tr>
		</table>
	</div>

	<script type="text/x-jquery-tmpl" id="contacts-info-tmpl">
		<fieldset id="contacts-block">
			<legend>${roomName}</legend>
			<div id="contacts"></div>
		</fieldset>
	</script>

	<script type="text/x-jquery-tmpl" id="contact-info-tmpl">
		<div class="contact {{if isMe}}my{{/if}}" data-name="${name}">
			<div class="name">${name}</div>
			{{if !isMe}}
			<div class="buttons">
				<button class="btn btn-info connect">Connect</button>
				<span class="label label-info connecting">Connecting...</span>

				<button class="btn btn-danger disconnect">Disconnect</button>
				<span class="label label-important disconnecting">Disconnecting...</span>
			</div>
			{{/if}}
			<div class="clear"></div>
		</div>
	</script>

	<script type="text/x-jquery-tmpl" id="chat-message-tmpl">
		<div class="message {{if isMy}}my{{/if}}">
			<span class="name">${name}:</span>
			<span class="text">${message}</span>
		</div>
	</script>

	<script type="text/x-jquery-tmpl" id="video-tmpl">
		<div class="person {{if isMe}}my{{/if}}" data-name="${name}">
			<div class="name">${name}</div>
			<div class="video">
				<video class="hide" id="${id}"></video>
			</div>
			<div class="buttons">
				{{if isVideoAvailable}}
				<button class="mute-video disable btn btn-danger"><span class="icon-picture icon-white"></span> Disable video</button>
				<button class="mute-video enable  btn btn-success hide"><span class="icon-facetime-video icon-white"></span> Enable video</button>
				{{/if}}
				
				{{if isAudioAvailable}}
				<button class="mute-audio disable btn btn-danger"><span class="icon-volume-off icon-white"></span> Disable audio</button>
				<button class="mute-audio enable  btn btn-success hide"><span class="icon-volume-up icon-white"></span> Enable audio</button>
				{{/if}}
			</div>
		</div>
	</script>
</body>
</html>
